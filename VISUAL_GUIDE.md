# ğŸ¬ Real-Time Broadcast System - Visual Walkthrough

## 1ï¸âƒ£ SYSTEM OVERVIEW

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          JHC REAL-TIME BROADCAST NETWORK                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚                    NODE.JS BACKEND                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚              â”‚   WebSocket Server       â”‚                   â”‚
â”‚              â”‚   Port: 3000             â”‚                   â”‚
â”‚              â”‚   Status: âœ… Running     â”‚                   â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                           â”‚                                 â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚                 â”‚                 â”‚              â”‚
â”‚         â–¼                 â–¼                 â–¼              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚    â”‚Browser 1â”‚      â”‚Browser 2â”‚       â”‚Browser Nâ”‚        â”‚
â”‚    â”‚  ğŸ–¥ï¸      â”‚      â”‚  ğŸ“±      â”‚       â”‚  ğŸ–¥ï¸      â”‚        â”‚
â”‚    â”‚  code-   â”‚      â”‚  code-  â”‚       â”‚  code-  â”‚        â”‚
â”‚    â”‚warning   â”‚      â”‚warning  â”‚       â”‚warning  â”‚        â”‚
â”‚    â”‚.html     â”‚      â”‚.html    â”‚       â”‚.html    â”‚        â”‚
â”‚    â”‚          â”‚      â”‚         â”‚       â”‚         â”‚        â”‚
â”‚    â”‚âœ… Play   â”‚      â”‚âœ… Play  â”‚       â”‚âœ… Play  â”‚        â”‚
â”‚    â”‚   Auto   â”‚      â”‚   Auto  â”‚       â”‚   Auto  â”‚        â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚         (Audio broadcasts simultaneously!)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ USER FLOW - BROADCAST ANNOUNCEMENT

```
STEP 1: RECORD
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks "Rekam" (Green Button)  â”‚
â”‚ âœ… Microphone permission requested   â”‚
â”‚ âœ… Recording starts (user speaks)    â”‚
â”‚ âœ… Waveform captured                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
STEP 2: STOP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks "Stop" (Orange Button)  â”‚
â”‚ âœ… Recording ends                    â”‚
â”‚ âœ… Audio blob created                â”‚
â”‚ âœ… Result box shows:                 â”‚
â”‚    Duration: 00:04                  â”‚
â”‚    Size: 67.27 KB                   â”‚
â”‚    Format: WebM Audio               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
STEP 3: TEST (OPTIONAL)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks "Dengar" (Cyan Button)  â”‚
â”‚ âœ… Audio plays locally only          â”‚
â”‚ âœ… User verifies recording OK        â”‚
â”‚ âœ… Button changes to "Pause"         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
STEP 4: BROADCAST â­ MAIN STEP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks "Kirim" (Purple Button)                      â”‚
â”‚ âœ… Audio blob converted to URL                           â”‚
â”‚ âœ… broadcastAnnouncement() called                        â”‚
â”‚ âœ… Socket.emit('broadcast-announcement', {...})         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   SOCKET.IO SERVER   â”‚
         â”‚   localhost:3000     â”‚
         â”‚                      â”‚
         â”‚ Receives broadcast   â”‚
         â”‚ announcement event   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚           â”‚
        â–¼           â–¼           â–¼
    Browser 1   Browser 2   Browser N
    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
    â”‚Recv  â”‚    â”‚Recv  â”‚    â”‚Recv  â”‚
    â”‚Event â”‚    â”‚Event â”‚    â”‚Event â”‚
    â”‚      â”‚    â”‚      â”‚    â”‚      â”‚
    â”‚â–¶Play â”‚    â”‚â–¶Play â”‚    â”‚â–¶Play â”‚
    â”‚ğŸ”Š â–   â”‚    â”‚ğŸ”Š â–   â”‚    â”‚ğŸ”Š â–   â”‚
    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜
        ğŸ‰         ğŸ‰         ğŸ‰
    All devices hear same audio SIMULTANEOUSLY!
```

---

## 3ï¸âƒ£ USER FLOW - BROADCAST CODE

### Path A: CODE BLUE

```
User clicks "CODE BLUE" (Blue Button)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal appears:                      â”‚
â”‚ "Pilih Lokasi" (Select Location)   â”‚
â”‚                                     â”‚
â”‚ [CATHLAB] [HCU] [ICU]               â”‚
â”‚ [IGD] [POLI] [RADIOLOGI]            â”‚
â”‚ [RANAP STANDAR] [RANAP VIP]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
User selects location: "CATHLAB"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ triggerCodeBlueLocation("CATHLAB")  â”‚
â”‚ âœ… Play audio 2x locally             â”‚
â”‚ âœ… broadcastCode() called            â”‚
â”‚ âœ… Socket.emit('broadcast-code', {  â”‚
â”‚     codeName: "CODE BLUE",          â”‚
â”‚     location: "CATHLAB"             â”‚
â”‚    })                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
     SERVER BROADCASTS
        â”‚
    â”Œâ”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”
    â”‚   â”‚   â”‚   â”‚
    â–¼   â–¼   â–¼   â–¼
   ğŸš¨ ğŸš¨ ğŸš¨ ğŸš¨
 All devices play CODE BLUE alert (2x)
 + Show: "ğŸš¨ CODE BLUE dipanggil di CATHLAB!"
```

### Path B: OTHER CODES (GREEN, RED, YELLOW, WHITE, BLACK, PURPLE)

```
User clicks "CODE GREEN" (Green Button)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal appears:                      â”‚
â”‚ [Play (Loop)]  [Stop]              â”‚
â”‚                                     â”‚
â”‚ openAudioControlModal("CODE GREEN") â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
User clicks "Play (Loop)"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handlePlayAudio()                   â”‚
â”‚ âœ… Audio loops at THIS device        â”‚
â”‚ âœ… playAudioLoop("CODE GREEN")       â”‚
â”‚ âœ… broadcastCode() called            â”‚
â”‚ âœ… Socket.emit('broadcast-code', {  â”‚
â”‚     codeName: "CODE GREEN"          â”‚
â”‚    })                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
     SERVER BROADCASTS
        â”‚
    â”Œâ”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”
    â”‚   â”‚   â”‚   â”‚
    â–¼   â–¼   â–¼   â–¼
   ğŸµ ğŸµ ğŸµ ğŸµ
 All devices play CODE GREEN audio
 (Broadcaster loops, Receivers single play)

User clicks "Stop"
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ handleStopAudio()                   â”‚
â”‚ âœ… Audio stops at THIS device        â”‚
â”‚ âœ… Modal closes                      â”‚
â”‚ âŒ No broadcast sent (stop is local) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4ï¸âƒ£ TECHNICAL ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BROWSER TAB                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            code-warning.html                       â”‚    â”‚
â”‚  â”‚  (HTML structure + UI components)                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                          â–²                                  â”‚
â”‚                          â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  script.js   â”‚  â”‚broadcast.js  â”‚  â”‚  styles.css  â”‚     â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚     â”‚
â”‚  â”‚sendRecording â”‚  â”‚Socket.io     â”‚  â”‚ UI Styling   â”‚     â”‚
â”‚  â”‚triggerCode   â”‚  â”‚client logic  â”‚  â”‚              â”‚     â”‚
â”‚  â”‚handleAudio   â”‚  â”‚emit/on eventsâ”‚  â”‚              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â–²                  â–²                                 â”‚
â”‚         â”‚                  â”‚                                 â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚                  â”‚                                           â”‚
â”‚                  â”‚ emit/on Socket.io events                 â”‚
â”‚                  â”‚                                           â”‚
â”‚                  â–¼                                           â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚         â”‚Socket.io Client  â”‚                                â”‚
â”‚         â”‚(CDN library)     â”‚                                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                  â”‚                                           â”‚
â”‚              WebSocket                                      â”‚
â”‚            (persistent)                                     â”‚
â”‚                  â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   INTERNET/LAN     â”‚
          â”‚  (WebSocket Frame) â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚               â”‚               â”‚
   â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server   â”‚  â”‚ Server   â”‚  â”‚ Server   â”‚
â”‚ :3000    â”‚  â”‚ :3000    â”‚  â”‚ :3000    â”‚
â”‚          â”‚  â”‚ (same)   â”‚  â”‚ (same)   â”‚
â”‚Express   â”‚  â”‚Express   â”‚  â”‚Express   â”‚
â”‚Socket.io â”‚  â”‚Socket.io â”‚  â”‚Socket.io â”‚
â”‚          â”‚  â”‚          â”‚  â”‚          â”‚
â”‚Broadcast â”‚  â”‚Broadcast â”‚  â”‚Broadcast â”‚
â”‚Manager   â”‚  â”‚Manager   â”‚  â”‚Manager   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚             â”‚             â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
           io.emit('play-announcement')
           io.emit('play-code')
                   â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              â”‚              â”‚
    â–¼              â–¼              â–¼
 Browser 1      Browser 2     Browser N
socket.on    socket.on      socket.on
'play-...'   'play-...'    'play-...'
    â”‚              â”‚              â”‚
    â–¼              â–¼              â–¼
playBroad...  playBroad...   playBroad...
    â”‚              â”‚              â”‚
    â–¼              â–¼              â–¼
  Audio           Audio          Audio
  Plays           Plays          Plays
  ğŸ”Š              ğŸ”Š             ğŸ”Š
```

---

## 5ï¸âƒ£ EVENT FLOW DIAGRAM

```
                      PHASE 1: SETUP
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Browser loads code-warning.html         â”‚
â”‚ âœ… HTML parsed                           â”‚
â”‚ âœ… CSS loaded                            â”‚
â”‚ âœ… script.js loaded                      â”‚
â”‚ âœ… broadcast.js loaded                   â”‚
â”‚ âœ… Socket.io library loaded (CDN)       â”‚
â”‚ âœ… DOMContentLoaded event fires          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼

           PHASE 2: CONNECTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ initBroadcast() called                  â”‚
â”‚ âœ… io('http://localhost:3000') creates  â”‚
â”‚ âœ… WebSocket connection established     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼

         PHASE 3: READY STATE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ socket.on('connect') fires              â”‚
â”‚ âœ… Show notification:                    â”‚
â”‚    "ğŸ”Œ Terhubung ke server broadcast"   â”‚
â”‚ âœ… Event listeners attached:             â”‚
â”‚    - play-announcement                  â”‚
â”‚    - play-code                          â”‚
â”‚    - disconnect                         â”‚
â”‚    - connect_error                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼

         PHASE 4: READY FOR USE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User can now:                           â”‚
â”‚ âœ… Record announcements                  â”‚
â”‚ âœ… Click code buttons                    â”‚
â”‚ âœ… All actions broadcast                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


              EVENT SEQUENCE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                       â”‚
â”‚ User Action          Send                Broadcast   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚                                                       â”‚
â”‚ Click "Kirim"     â†’  socket.emit(       â†’  io.emit(  â”‚
â”‚                     'broadcast-        'play-       â”‚
â”‚                     announcement',     announcement â”‚
â”‚                     {...})             ', {...})    â”‚
â”‚                                                       â”‚
â”‚ All clients          socket.on(                     â”‚
â”‚ receive             'play-announcement')            â”‚
â”‚                     â†’ playBroadcast                 â”‚
â”‚                     Announcement()                  â”‚
â”‚                     â†’ Audio plays ğŸ”Š                â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6ï¸âƒ£ TIMING DIAGRAM

```
Device 1                Server              Device 2        Device N
Broadcaster             :3000               Receiver        Receiver
    â”‚                    â”‚                     â”‚              â”‚
    â”‚ emit broadcast     â”‚                     â”‚              â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚                     â”‚              â”‚
    â”‚                    â”‚                     â”‚              â”‚
    â”‚ (50-100ms)         â”‚                     â”‚              â”‚
    â”‚                    â”‚ emit to all         â”‚              â”‚
    â”‚                    â”‚ connected           â”‚              â”‚
    â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’              â”‚
    â”‚                    â”‚                     â”‚              â”‚
    â”‚                    â”‚                     â”‚  emit to all â”‚
    â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚
    â”‚                    â”‚                     â”‚              â”‚
    â”‚                    â”‚                     â”‚ (50-100ms)   â”‚
    â”‚                    â”‚                     â”‚              â”‚
    â”‚ (100-200ms         â”‚ (Total Latency)    â”‚              â”‚
    â”‚ Round Trip)        â”‚                     â–¼              â”‚
    â”‚â—„â”€ Confirm (Opt)    â”‚                   Play Audio
    â”‚                    â”‚                     â”‚
    â”‚                    â”‚                     â”‚
    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚ ACK Received                             â”‚
    â”‚                    â”‚                     â”‚              â–¼
    â”‚                    â”‚                     â”‚            Play Audio

Timeline:
T+0ms    : User clicks button
T+50ms   : Socket.emit sent
T+100ms  : Server receives
T+110ms  : Server broadcasts
T+160ms  : Devices receive (worst case)
T+200ms  : Audio starts playing everywhere

Total Broadcast Latency: ~100-200ms
Perceived as: SIMULTANEOUS âœ…
```

---

## 7ï¸âƒ£ DATA STRUCTURE

```
Announcement Broadcast:
â”œâ”€â”€ audioUrl: "blob:http://localhost:8000/a1b2c3d4"
â”œâ”€â”€ duration: 4.5  (seconds)
â””â”€â”€ broadcastAt: "2025-12-18T10:30:45.000Z"

Code Broadcast:
â”œâ”€â”€ codeName: "CODE BLUE" | "CODE GREEN" | etc
â”œâ”€â”€ location: "CATHLAB" | "ICU" | null (for non-BLUE)
â””â”€â”€ broadcastAt: "2025-12-18T10:30:45.000Z"

Socket.io Packet:
{
  "event": "broadcast-announcement",
  "data": {
    "audioUrl": "blob:...",
    "duration": 4.5
  },
  "timestamp": 1234567890
}
```

---

## 8ï¸âƒ£ ERROR RECOVERY

```
SCENARIO: Server crashes or becomes unreachable

Device 1          Server              Device 2-N
   â”‚               â”‚                      â”‚
   â”œâ”€ Connected    â”‚                      â”‚
   â”‚  âœ…            â”‚                      â”‚
   â”‚               â”‚                      â”‚
   â”‚               âœ… All connected       â”‚
   â”‚               â”‚                      âœ…
   â”‚               â”‚                      â”‚
   â”‚         ğŸ’¥ Server crash              â”‚
   â”‚               â”‚                      â”‚
   â”‚         (Connection lost)            â”‚
   â”‚               â”‚                      â”‚
   â”‚ Auto-retry    â”‚                      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚ (wait, retry...)     â”‚
   â”‚               â”‚                      â”‚
   â”‚ After 5       â”‚                      â”‚
   â”‚ retries...    â”‚                      â”‚
   â”‚               â”‚                      â”‚
   â”œâ”€ Show error:  â”‚                      â”‚
   â”‚ "ğŸ”Œ Terputus  â”‚                      â”‚
   â”‚  dari server" â”‚                      â”‚
   â”‚               â”‚                      â”‚
   â”‚ Local mode:   â”‚                      â”‚
   â”‚ Audio plays   â”‚                      â”‚
   â”‚ locally only  â”‚                      â”‚
   â”‚ (no broadcast)                       â”‚

Recovery when server comes back online:
   â”‚                â”‚
   â”œâ”€ Auto-reconnect                      â”‚
   â”‚  âœ…                                  âœ…
   â”‚ "Connected"     â”‚                 "Connected"
   â”‚               âœ… Back online          â”‚
   â”‚                â”‚                      â”‚
   â”‚ Ready to      â”‚                      â”‚
   â”‚ broadcast    â”‚                      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ âœ…
```

---

## âœ¨ Summary

- **Real-time**: Messages delivered in ~100-200ms
- **Simultaneous**: All devices receive and play together
- **Reliable**: Auto-reconnection if connection drops
- **Fallback**: Local playback if server unavailable
- **Scalable**: Unlimited devices can connect
- **Simple**: No action needed on receiver side

ğŸš€ **Status: READY TO DEPLOY**
