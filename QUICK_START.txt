# ğŸš€ QUICK START - JHC Broadcast System

## 30 Seconds Setup

```bash
# Terminal 1:
cd backend
npm start

# Terminal 2 (Optional, to watch for changes):
cd backend
npm run dev
```

**âœ… Server ready at: http://localhost:3000**

---

## 1 Minute Testing

### Browser Tabs/Devices:
```
Tab 1: http://localhost/aa_jhc/frontend/code-warning.html
Tab 2: http://localhost/aa_jhc/frontend/code-warning.html
Tab 3: http://localhost/aa_jhc/frontend/code-warning.html
```

Each tab shows: `âœ… Connected to broadcast server`

---

## 2 Minute First Broadcast

### Test Announcement:
```
Tab 1 (Broadcaster):
1. Click "Rekam" â†’ speak â†’ "Stop" â†’ "Kirim"
2. See: "âœ… Pengumuman dikirim ke semua display!"

Tab 2,3 (Receiver):
- ğŸ”Š Audio automatically plays!
- ğŸ“¢ Same announcement heard everywhere
```

### Test Code:
```
Tab 1 (Broadcaster):
1. Click "CODE BLUE" â†’ Select "CATHLAB"
2. See: "ğŸš¨ CODE BLUE dipanggil di CATHLAB!"

Tab 2,3 (Receiver):
- ğŸš¨ Audio automatically plays 2x!
```

---

## Command Reference

| Command | Purpose | Terminal |
|---------|---------|----------|
| `npm install` | Install dependencies | backend (once) |
| `npm start` | Run server (production) | backend (always run) |
| `npm run dev` | Run server (watch mode) | backend (optional) |

---

## File Locations

| File | Purpose | Location |
|------|---------|----------|
| Server | WebSocket backend | `backend/server.js` |
| Config | Dependencies | `backend/package.json` |
| Client | Socket.io client | `frontend/broadcast.js` âœ¨ NEW |
| UI | Code warning page | `frontend/code-warning.html` |
| Logic | Main functions | `frontend/script.js` |
| Styles | CSS | `frontend/styles.css` |
| Docs | Full guide | Root folder (`*.md`) |

---

## Browser Console Output

### When Working âœ…:
```
âœ… Connected to broadcast server
ğŸ“¢ Menerima broadcast announcement
ğŸ”Š Playing broadcast announcement
```

### When Error âŒ:
```
Connection error: ...
(check if server is running)
```

---

## Common Issues

| Problem | Fix |
|---------|-----|
| Server won't start | Confirm: `cd backend` then `npm start` |
| Port 3000 in use | Kill old process or use different port |
| Audio not heard | Check volume, refresh tab, check console |
| Not connecting | Verify `http://localhost:3000` is accessible |

---

## What It Does

### User Presses "Kirim" (Send)
```
1. Client sends audio blob to server
2. Server broadcasts to ALL connected devices
3. Every device automatically plays audio
4. No action needed on receiver side
```

### User Clicks CODE Button
```
1. User selects location or starts broadcast
2. Client sends code name to server
3. Server broadcasts to ALL connected devices
4. Every device automatically plays code audio
5. No action needed on receiver side
```

---

## Architecture

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Server     â”‚
                    â”‚  :3000      â”‚
                    â”‚  Socket.io  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚              â”‚              â”‚
        â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â”€â–¼â”€â”€â”€â”      â”Œâ”€â”€â–¼â”€â”€â”€â”€â”
        â”‚Device1â”‚      â”‚Device2â”‚      â”‚DeviceNâ”‚
        â”‚â–“â–“â–“â–“â–“â–“â”‚      â”‚â–“â–“â–“â–“â–“â–“â”‚      â”‚â–“â–“â–“â–“â–“â–“â”‚
        â”‚ Play  â”‚      â”‚ Play  â”‚      â”‚ Play  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”˜
           â†‘              â†‘              â†‘
        (Broadcast from any device)
```

---

## Deploy Checklist

- [ ] Server running in backend terminal
- [ ] Open code-warning.html in browser
- [ ] See "Connected to broadcast server" message
- [ ] Test recording â†’ kirim â†’ auto play in all tabs
- [ ] Test code button â†’ auto play in all tabs
- [ ] Check no error in console (F12)
- [ ] âœ… Ready to use!

---

## Important Notes

âš ï¸ **Server must be running** for broadcast to work
âœ… Announcement and Codes auto-broadcast to ALL devices
âœ… No manual action needed on receiver side
âœ… Works simultaneously on unlimited devices

---

**Version:** 1.0.0
**Status:** âœ… Ready to Use
**Updated:** Dec 18, 2025

For detailed guide: see `BROADCAST_SETUP.md` or `SYSTEM_ARCHITECTURE.md`
